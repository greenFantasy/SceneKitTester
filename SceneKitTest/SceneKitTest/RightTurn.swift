//
//  RightTurn.swift
//  SceneKitTest
//
//  Created by Rajat Mittal on 8/22/19.
//  Copyright Â© 2019 Rajat Mittal. All rights reserved.
//

import Foundation
import SceneKit
import SpriteKit

class RightTurn:TurnProtocol {
    
    internal var upStreetArray = [[0.586457,-1.95645],[0.592964,-1.85769],[0.606364,-1.75963],[0.626589,-1.66274],[0.653541,-1.56751],[0.687088,-1.47439],[0.727066,-1.38385],[0.773278,-1.29633],[0.825499,-1.21225],[0.883473,-1.13203],[0.946916,-1.05607],[1.01552,-0.984721],[1.08894,-0.91835],[1.16682,-0.857277],[1.24879,-0.8018],[1.33443,-0.752193],[1.42334,-0.708697],[1.51507,-0.671526],[1.60917,-0.640862],[1.70519,-0.616855],[1.80266,-0.599623],[1.90109,-0.58925],[2.0,-0.585786]]
    
    internal var leftStreetArray = [[1.95645,0.586457],[1.85769,0.592964],[1.75963,0.606364],[1.66274,0.626589],[1.56751,0.653541],[1.47439,0.687088],[1.38385,0.727066],[1.29633,0.773278],[1.21225,0.825499],[1.13203,0.883473],[1.05607,0.946916],[0.984721,1.01552],[0.91835,1.08894],[0.857277,1.16682],[0.8018,1.24879],[0.752193,1.33443],[0.708697,1.42334],[0.671526,1.51507],[0.640862,1.60917],[0.616855,1.70519],[0.599623,1.80266],[0.58925,1.90109],[0.585786,2.0]]
    
    internal var downStreetArray = [[-0.586457,1.95645],[-0.592964,1.85769],[-0.606364,1.75963],[-0.626589,1.66274],[-0.653541,1.56751],[-0.687088,1.47439],[-0.727066,1.38385],[-0.773278,1.29633],[-0.825499,1.21225],[-0.883473,1.13203],[-0.946916,1.05607],[-1.01552,0.984721],[-1.08894,0.91835],[-1.16682,0.857277],[-1.24879,0.8018],[-1.33443,0.752193],[-1.42334,0.708697],[-1.51507,0.671526],[-1.60917,0.640862],[-1.70519,0.616855],[-1.80266,0.599623],[-1.90109,0.58925],[-2.0,0.585786]]
    
    internal var rightStreetArray = [[-1.95645,-0.586457],[-1.85769,-0.592964],[-1.75963,-0.606364],[-1.66274,-0.626589],[-1.56751,-0.653541],[-1.47439,-0.687088],[-1.38385,-0.727066],[-1.29633,-0.773278],[-1.21225,-0.825499],[-1.13203,-0.883473],[-1.05607,-0.946916],[-0.984721,-1.01552],[-0.91835,-1.08894],[-0.857277,-1.16682],[-0.8018,-1.24879],[-0.752193,-1.33443],[-0.708697,-1.42334],[-0.671526,-1.51507],[-0.640862,-1.60917],[-0.616855,-1.70519],[-0.599623,-1.80266],[-0.58925,-1.90109],[-0.585786,-2.0]]
    
    internal var mainArray:[[Double]]
    internal var pointReached = 0
    internal var car:Car
    
    init(car:Car) {
        self.car = car
        switch car.getPreviousStreet().getDirection() {
        case 0:
            mainArray = leftStreetArray
        case 1:
            mainArray = rightStreetArray
        case 2:
            mainArray = downStreetArray
        case 3:
            mainArray = upStreetArray
        default:
            mainArray = []
        }
    }
    
    func turnCar() {
        if let intersection = car.getCurrentIntersection() {
            if (pointReached < mainArray.count) {
                car.setPos(newX: mainArray[pointReached][0] + intersection.getPosition()[0], newY: mainArray[pointReached][1] + intersection.getPosition()[1])
                pointReached += 1
            }
        }
    }
}
