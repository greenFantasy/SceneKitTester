//
//  UpStreetLeftTurn.swift
//  SceneKitTest
//
//  Created by Rajat Mittal on 8/3/19.
//  Copyright Â© 2019 Rajat Mittal. All rights reserved.
//

import Foundation
import SceneKit
import SpriteKit

class UpStreetLeftTurn:TurnProtocol {
    
    internal var upStreetArray = [[0.994605, -2.94194], [0.985598, -2.86039], [0.974962, -2.77904], [0.962701, -2.69791], [0.94882, -2.61705], [0.933325, -2.53648], [0.916222, -2.45623], [0.897517, -2.37635], [0.877218, -2.29685], [0.855334, -2.21778], [0.831872, -2.13916], [0.806843, -2.06102], [0.780257, -1.9834], [0.752123, -1.90633], [0.722454, -1.82984], [0.691261, -1.75395], [0.658556, -1.6787], [0.624353, -1.60413], [0.588666, -1.53025], [0.551508, -1.4571], [0.512895, -1.3847], [0.472841, -1.3131], [0.431364, -1.24231], [0.388479, -1.17236], [0.344204, -1.10329], [0.298557, -1.03511], [0.251555, -0.967861], [0.203218, -0.901565], [0.153564, -0.836249], [0.102614, -0.771939], [0.0503886, -0.708661], [-0.00309218, -0.64644], [-0.0578066, -0.585301], [-0.113733, -0.525269], [-0.170848, -0.466367], [-0.22913, -0.408618], [-0.288556, -0.352047], [-0.349101, -0.296676], [-0.410741, -0.242527], [-0.473451, -0.189621], [-0.537207, -0.13798], [-0.601983, -0.0876239], [-0.667754, -0.0385736], [-0.734492, 0.00915149], [-0.802171, 0.0555324], [-0.870764, 0.100551], [-0.940244, 0.144188], [-1.01058, 0.186427], [-1.08175, 0.227251], [-1.15372, 0.266644], [-1.22647, 0.304589], [-1.29996, 0.341072], [-1.37416, 0.376078], [-1.44905, 0.409593], [-1.52459, 0.441604], [-1.60076, 0.472097], [-1.67753, 0.501061], [-1.75486, 0.528484], [-1.83272, 0.554355], [-1.91108, 0.578664], [-1.98991, 0.601401], [-2.06919, 0.622557], [-2.14886, 0.642123], [-2.22892, 0.660092], [-2.30932, 0.676456], [-2.39003, 0.691209], [-2.47102, 0.704345], [-2.55225, 0.715859], [-2.6337, 0.725746], [-2.71533, 0.734002], [-2.79711, 0.740623], [-2.879, 0.745608], [-2.96098, 0.748955]]
    
    internal var leftStreetArray = [[2.94198, 0.994595], [2.86043, 0.985588], [2.77908, 0.974951], [2.69795, 0.96269], [2.61708, 0.948809], [2.53651, 0.933314], [2.45627, 0.91621], [2.37638, 0.897505], [2.29688, 0.877206], [2.21781, 0.855321], [2.13918, 0.831859], [2.06105, 0.80683], [1.98342, 0.780242], [1.90635, 0.752108], [1.82986, 0.722438], [1.75397, 0.691245], [1.67872, 0.658539], [1.60414, 0.624336], [1.53026, 0.588648], [1.45711, 0.551489], [1.38472, 0.512875], [1.31311, 0.472821], [1.24232, 0.431343], [1.17237, 0.388457], [1.10329, 0.344182], [1.03511, 0.298533], [0.967864, 0.25153], [0.901567, 0.203192], [0.836249, 0.153538], [0.771938, 0.102587], [0.708659, 0.05036], [0.646437, -0.00312175], [0.585296, -0.0578372], [0.525263, -0.113764], [0.466359, -0.170881], [0.40861, -0.229164], [0.352038, -0.288591], [0.296666, -0.349137], [0.242515, -0.410778], [0.189608, -0.47349], [0.137966, -0.537247], [0.0876093, -0.602025], [0.0385581, -0.667796], [-0.00916798, -0.734535], [-0.0555498, -0.802216], [-0.100569, -0.87081], [-0.144207, -0.940291], [-0.186447, -1.01063], [-0.227272, -1.0818], [-0.266665, -1.15377], [-0.304611, -1.22652], [-0.341095, -1.30001], [-0.376102, -1.37422], [-0.409617, -1.44911], [-0.441629, -1.52465], [-0.472123, -1.60082], [-0.501087, -1.67759], [-0.528511, -1.75492], [-0.554382, -1.83278], [-0.578692, -1.91115], [-0.601429, -1.98998], [-0.622585, -2.06925], [-0.642152, -2.14894], [-0.660121, -2.22899], [-0.676485, -2.30939], [-0.691239, -2.3901], [-0.704375, -2.47109], [-0.715889, -2.55233], [-0.725776, -2.63378], [-0.734032, -2.71541], [-0.740654, -2.79719], [-0.745639, -2.87909], [-0.748986, -2.96107]]
    
    internal var downStreetArray = [[-0.994595, 2.94198], [-0.985588, 2.86043], [-0.974951, 2.77908], [-0.96269, 2.69795], [-0.948809, 2.61708], [-0.933314, 2.53651], [-0.91621, 2.45627], [-0.897505, 2.37638], [-0.877206, 2.29688], [-0.855321, 2.21781], [-0.831859, 2.13918], [-0.80683, 2.06105], [-0.780242, 1.98342], [-0.752108, 1.90635], [-0.722438, 1.82986], [-0.691245, 1.75397], [-0.658539, 1.67872], [-0.624336, 1.60414], [-0.588648, 1.53026], [-0.551489, 1.45711], [-0.512875, 1.38472], [-0.472821, 1.31311], [-0.431343, 1.24232], [-0.388457, 1.17237], [-0.344182, 1.10329], [-0.298533, 1.03511], [-0.25153, 0.967864], [-0.203192, 0.901567], [-0.153538, 0.836249], [-0.102587, 0.771938], [-0.05036, 0.708659], [0.00312175, 0.646437], [0.0578372, 0.585296], [0.113764, 0.525263], [0.170881, 0.466359], [0.229164, 0.40861], [0.288591, 0.352038], [0.349137, 0.296666], [0.410778, 0.242515], [0.47349, 0.189608], [0.537247, 0.137966], [0.602025, 0.0876093], [0.667796, 0.0385581], [0.734535, -0.00916798], [0.802216, -0.0555498], [0.87081, -0.100569], [0.940291, -0.144207], [1.01063, -0.186447], [1.0818, -0.227272], [1.15377, -0.266665], [1.22652, -0.304611], [1.30001, -0.341095], [1.37422, -0.376102], [1.44911, -0.409617], [1.52465, -0.441629], [1.60082, -0.472123], [1.67759, -0.501087], [1.75492, -0.528511], [1.83278, -0.554382], [1.91115, -0.578692], [1.98998, -0.601429], [2.06925, -0.622585], [2.14894, -0.642152], [2.22899, -0.660121], [2.30939, -0.676485], [2.3901, -0.691239], [2.47109, -0.704375], [2.55233, -0.715889], [2.63378, -0.725776], [2.71541, -0.734032], [2.79719, -0.740654], [2.87909, -0.745639], [2.96107, -0.748986]]
    
    internal var rightStreetArray = [[-2.94198, -0.994595], [-2.86043, -0.985588], [-2.77908, -0.974951], [-2.69795, -0.96269], [-2.61708, -0.948809], [-2.53651, -0.933314], [-2.45627, -0.91621], [-2.37638, -0.897505], [-2.29688, -0.877206], [-2.21781, -0.855321], [-2.13918, -0.831859], [-2.06105, -0.80683], [-1.98342, -0.780242], [-1.90635, -0.752108], [-1.82986, -0.722438], [-1.75397, -0.691245], [-1.67872, -0.658539], [-1.60414, -0.624336], [-1.53026, -0.588648], [-1.45711, -0.551489], [-1.38472, -0.512875], [-1.31311, -0.472821], [-1.24232, -0.431343], [-1.17237, -0.388457], [-1.10329, -0.344182], [-1.03511, -0.298533], [-0.967864, -0.25153], [-0.901567, -0.203192], [-0.836249, -0.153538], [-0.771938, -0.102587], [-0.708659, -0.05036], [-0.646437, 0.00312175], [-0.585296, 0.0578372], [-0.525263, 0.113764], [-0.466359, 0.170881], [-0.40861, 0.229164], [-0.352038, 0.288591], [-0.296666, 0.349137], [-0.242515, 0.410778], [-0.189608, 0.47349], [-0.137966, 0.537247], [-0.0876093, 0.602025], [-0.0385581, 0.667796], [0.00916798, 0.734535], [0.0555498, 0.802216], [0.100569, 0.87081], [0.144207, 0.940291], [0.186447, 1.01063], [0.227272, 1.0818], [0.266665, 1.15377], [0.304611, 1.22652], [0.341095, 1.30001], [0.376102, 1.37422], [0.409617, 1.44911], [0.441629, 1.52465], [0.472123, 1.60082], [0.501087, 1.67759], [0.528511, 1.75492], [0.554382, 1.83278], [0.578692, 1.91115], [0.601429, 1.98998], [0.622585, 2.06925], [0.642152, 2.14894], [0.660121, 2.22899], [0.676485, 2.30939], [0.691239, 2.3901], [0.704375, 2.47109], [0.715889, 2.55233], [0.725776, 2.63378], [0.734032, 2.71541], [0.740654, 2.79719], [0.745639, 2.87909], [0.748986, 2.96107]]
    
    internal var mainArray:[[Double]]
    internal var pointReached = 0
    internal var car:Car
    
    init(car:Car) {
        self.car = car
        switch car.getPreviousStreet().getDirection() {
        case 0:
            mainArray = leftStreetArray
        case 1:
            mainArray = rightStreetArray
        case 2:
            mainArray = downStreetArray
        case 3:
            mainArray = upStreetArray
        default:
            mainArray = []
        }
    }
    
    func turnCar() {
        if let intersection = car.getCurrentIntersection() {
            if (pointReached < mainArray.count) {
                car.setPos(newX: mainArray[pointReached][0] + intersection.getPosition()[0], newY: mainArray[pointReached][1] + intersection.getPosition()[1])
                pointReached += 1
            }
        }
    }
}
